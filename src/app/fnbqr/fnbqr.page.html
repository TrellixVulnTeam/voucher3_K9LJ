<ion-content style='--background:#e6e3ff'>

  <div [ngClass]='close==true ? "inner" : "innerx"' style='position: fixed;left:0;background-color: rgba(0,0,0,0.85);display:flex;justify-content: center;
    align-items: center;width:100vw;height:100vh;z-index:10000;flex-direction: column;'>
    <div style='width:100%;position: relative;'>
      <div (click)='close = !close;'
        style='font-size:10px;padding:5px 10px;border-radius:2px;color:white;background-color: #f53c3c;position: absolute;top:15px;right:15px;z-index:10;font-weight:bold;'>
        Close</div>
      <ion-slides (ionSlideDidChange)='checkslide($event)' #slides zoom="true" pager="true"
        style='width:100%;height:100%;display:flex;justify-content: center;align-items: center;'>
        <ion-slide *ngFor='let each of (nowphoto || []); let i = index'
          style='display:flex;justify-content: center;align-items: center;width:100%;height:100%;'>
          <img style='width:100%;object-fit: contain;' src="{{each}}" alt="">
        </ion-slide>
      </ion-slides>
    </div>
    <!-- <div style='width:100vw;display:flex;align-items: center;justify-content: center;padding:10px 15px;'>
      <div
        style='width:100%;padding:10px 20px;display:flex;align-items: center;justify-content: center;background-color: #f53c3c;border-radius:5px;box-shadow:1px 5px 10px rgba(0,0,0,0.1)'>
        <div (click)='downloadimage()' style='font-size:14px;color:white;font-weight: bold;letter-spacing: .5px;'>
          下载图片</div>
      </div>
    </div> -->
  </div>


  <!-- <div
    style="position:fixed;top:0;left:0;height:50px;display:flex;align-items:center;z-index: 1002;width: 100vw;background:transparent;justify-content: space-between;">
    <div
      style='margin-left:15px;height:25px;width:25px;display:flex;justify-content: center;align-items: center;border-radius:100%;background-color: rgba(255,255,255,0.5);'>
      <ion-icon (click)='back()' style='color:black;font-size:20px;margin-right:3px;' name="chevron-back-outline">
      </ion-icon>
    </div>
  </div> -->

  <div class='paddingcon' style='position: relative;'>

    <!-- <div style='font-size:18px;color:white;font-weight: bold;text-align: center;'>xxxx</div> -->

    <div *ngIf='tab==0'
      style='width:calc( 100% - 60px );background-color: rgba(255,255,255,1);min-height:calc( 100vh - 150px );margin:75px 30px;border-radius:10px;box-shadow:1px 5px 10px rgba(0,0,0,0.1);'>

      <img style='width:100%;height:120px;object-fit: cover;border-top-left-radius: 10px;border-top-right-radius: 10px;'
        src="{{photos[0]}}" alt="">

      <div style='font-size:12px;color:#999999;letter-spacing: .5px;padding:10px 15px;padding-bottom:5px;'>Vendor Name :
        {{vendor.name}}</div>

      <div style='font-size:16px;font-weight: bold;color:#333333;letter-spacing: 1px;padding:0px 15px;'>
        {{vendor.promote_text || 'Let Merchant set this QR Code to Recieve extral Reward'}}</div>

      <div style='width:100%;display:flex;align-items: center;justify-content: space-between;padding:15px;'>
        <div style='color:#00b871;font-size:12px;letter-spacing: .5px;'>Available</div>
        <div style='font-size:12px;color:#999999;letter-spacing: .5px;'>Referred by :&nbsp;{{user.name}}</div>

      </div>
      <div style='width:100%;border-bottom:1px dashed #eeeeee;'></div>

      <img style='margin:15px;width:calc( 100% - 50px )' src="{{qr}}" alt="">

      <div style='font-size:12px;color:#999999;padding:0px 15px;text-align: center;letter-spacing: .5px;;'>Kindly
        present your QR code to the shop keeper in order to activate your promotion.</div>

      <div style='padding:15px;width:100%;display:flex;align-items: center;flex-wrap: wrap;justify-content: center;'>
        <div (click)='menu()'
          style='background-color: #00b871;padding:7px 15px;border-radius:5px;font-size:14px;color:white;letter-spacing: .5px;margin-right:7px;margin-bottom:7px;;'>
          Service Menu</div>
        <div (click)='copy2()'
          style='background-color: #00b871;padding:7px 15px;border-radius:5px;font-size:14px;color:white;letter-spacing: .5px;margin-right:7px;margin-bottom:7px;;'>
          Share to Friends</div>
        <div (click)='outlet()'
          style='background-color: #00b871;padding:7px 15px;border-radius:5px;font-size:14px;color:white;letter-spacing: .5px;margin-right:7px;margin-bottom:7px;;'>
          Get Direction</div>
        <div *ngIf="vendor.tnc_text" (click)='tnc()'
          style='background-color: #00b871;padding:7px 15px;border-radius:5px;font-size:14px;color:white;letter-spacing: .5px;margin-right:7px;margin-bottom:7px;;'>
          Term of Use</div>

      </div>

    </div>

    <div *ngIf='tab==1'
      style='width:calc( 100% - 60px );background-color: rgba(255,255,255,1);min-height:calc( 100vh - 200px );margin:100px 30px;border-radius:10px;box-shadow:1px 5px 10px rgba(0,0,0,0.1);padding:15px;'>
      <div style='display:flex;align-items: center;padding-bottom:10px;'>
        <ion-icon (click)='tab=0;' style='font-size:14px;color:#333333;margin-right:10px;' name="arrow-back-outline">
        </ion-icon>
        <div style='font-size:14px;font-weight: bold;color:#333333;letter-spacing: .5px;'>电子目录</div>
      </div>

      <div *ngFor="let x of emenu">

        <div style='font-size:16px;font-weight: bold;color:#333333;letter-spacing: .5px; margin-top: 10px;'>{{x.name}}
        </div>
        <div *ngFor="let y of x.products; let i = index" (click)="openpic(x.products, i)"
          style='width:100%;display:flex;padding:10px 0px;border-bottom:1px solid #eeeeee;'>
          <img style='height:70px;width:70px;border-radius:5px;' src="{{y.photo}}" alt="">
          <div style='width:calc( 100% - 70px );padding-left:10px;'>
            <div style='font-size:12px;letter-spacing: .5px;color:#333333;'>{{y.name}}</div>
            <div style='font-size:11px;color:#999999;letter-spacing: .5px;margin-top:2px;display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
            overflow: hidden;'>{{y.description || '商家没留下详情哦'}}</div>
            <div style='margin-top:5px;font-size:12px;font-weight: bold;letter-spacing: .5px;'>{{y.price | currency :
              "RM "}}</div>
          </div>
        </div>

      </div>


    </div>

    <div *ngIf='tab==3'
      style='width:calc( 100% - 60px );background-color: rgba(255,255,255,1);min-height:calc( 100vh - 200px );margin:100px 30px;border-radius:10px;box-shadow:1px 5px 10px rgba(0,0,0,0.1);padding:15px;'>
      <div style='display:flex;align-items: center;'>
        <ion-icon (click)='tab=0;' style='font-size:14px;color:#333333;margin-right:10px;' name="arrow-back-outline">
        </ion-icon>
        <div style='font-size:14px;font-weight: bold;color:#333333;letter-spacing: .5px;'>所有分店</div>
      </div>

      <div *ngFor="let x of vendor_acc"
        style='width:100%;display:flex;border-bottom:1px solid #eeeeee;padding-bottom:8px;padding-top:15px;'>
        <div style='width:calc( 100% );'>
          <div style='font-size:12px;letter-spacing: .5px;color:#333333;'>{{x.name}}</div>
          <div style='font-size:11px;color:#999999;letter-spacing: .5px;margin-top:3px;'>{{x.address}}</div>
          <div style='display:flex;width:100%;flex-wrap: wrap;margin-top:7px;'>
            <div *ngIf="x.gps" (click)="opengps(x.gps)"
              style='padding:3px 7px;font-size:12px;border:1px solid #eeeeee;border-radius:5px;color:#999999;margin-right:7px;margin-bottom:7px;'>
              Open Map</div>
            <div *ngIf="x.contact" (click)="copy(x.contact)"
              style='padding:3px 7px;font-size:12px;border:1px solid #eeeeee;border-radius:5px;color:#999999;margin-right:7px;margin-bottom:7px;'>
              {{x.contact}}</div>
          </div>
        </div>
      </div>

    </div>

    <div *ngIf='tab==4'
      style='width:calc( 100% - 60px );background-color: rgba(255,255,255,1);min-height:calc( 100vh - 200px );margin:100px 30px;border-radius:10px;box-shadow:1px 5px 10px rgba(0,0,0,0.1);padding:15px;'>
      <div style='display:flex;align-items: center;'>
        <ion-icon (click)='tab=0;' style='font-size:14px;color:#333333;margin-right:10px;' name="arrow-back-outline">
        </ion-icon>
        <div style='font-size:14px;font-weight: bold;color:#333333;letter-spacing: .5px;'>优惠条规</div>
      </div>
      <div style='width:100%;display:flex;padding-bottom:8px;padding-top:15px; font-size: 12px;'>

        <div style="white-space: pre-line; font-size: 12px;">{{vendor.tnc_text}}</div>

      </div>
    </div>

  </div>
  <!-- <img style='height:100vh;width:100%;object-fit: cover;position: fixed;z-index:-1;top:0;left:0;opacity: 0.5;' src="https://wallpaperaccess.com/full/2750138.jpg" alt=""> -->
</ion-content>